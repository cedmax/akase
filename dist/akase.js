define("sandbox",[],function(){var n={};return function(e,t){function i(n,e){"undefined"==typeof a[n]&&(a[n]=[]),a[n].push(e)}function o(n,e){if(n instanceof Array)for(var t=n.length,o=0;t>o;o++)i(n[o],e);else i(n,e)}function r(n,e){if(a[n]instanceof Array)for(var t=[].concat(a[n]),i=t.length,o=0;i>o;o++)t[o]&&t[o](e)}function f(n,t){e(n,t)}var a={};return{publish:f,handle:r,subscribe:o,api:n,module:t}}}),define("akase",["sandbox"],function(n){var e=require,t={},i={},o=function(n,e){n=n||{};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},r=function(t){var o=function(e){i[t].sandbox=new n(a,t);var o=i[t].instance=e(i[t].sandbox),r=i[t].config||{};o.init.call(o,r)};e.defined(t)?o(e(t)):e([t],function(n){o(n)})},f=function(n,e){var f;if(f=t[n]){for(var a=0,c=f.length;c>a;a++)i[f[a]].config=o(i[f[a]].config,e),r(f[a]);delete t[n]}},a=function(n,e){if(n){for(var t in i)i.hasOwnProperty(t)&&i[t].instance&&i[t].sandbox.handle(n,e);f(n,e)}},c=function(n){var e=i[n]&&i[n].instance;e&&e.destroy&&e.destroy(),delete i[n]},u=function(n,e){i[n]={config:e&&e.config,triggerEvent:e&&e.event,instance:null,sandbox:null};var o;(o=i[n].triggerEvent)?(t[o]||(t[o]=[]),t[o].push(n)):r(n)};return{notify:a,start:function(n,e){n&&(c(n),u(n,e))},stop:function(n){n&&(c(n),e.undef(n))}}});