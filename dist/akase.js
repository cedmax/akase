define("sandbox",[],function(){"use strict";var n={};return function(t,i){function e(n,t){"undefined"==typeof f[n]&&(f[n]=[]),f[n].push(t)}function o(n,t){if(n instanceof Array)for(var i=n.length,o=0;i>o;o++)e(n[o],t);else e(n,t)}function r(n,t){if(f[n]instanceof Array)for(var i=[].concat(f[n]),e=i.length,o=0;e>o;o++)i[o]&&i[o](t)}function a(n,i){t(n,i)}var f={};return{publish:a,handle:r,subscribe:o,api:n,module:i}}}),define("akase",["sandbox"],function(n){"use strict";var t=require,i=function(n){return window.akase&&window.akase.config&&window.akase.config[n]},e={},o={},r=function(n,t,i){console.log("module: "+t+", event: "+(i||"init")+", message: "+n.message)},a=function(n,t){n=n||{},t=t||{};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},f=function(i){var e=function(t){o[i].sandbox=new n(s,i);var e=o[i].instance=t(o[i].sandbox),a=o[i].config||{};try{e.init.call(e,a)}catch(f){r(f,i,"init")}};e(t(i))},c=function(n,t){var i;if(i=e[n])for(var r=0,c=i.length;c>r;r++){var s=i[r];o[s].waitForConfig?o[s].triggerEvent=t:(o[s].config=a(o[s].config,t),f(s))}},s=function(n,t){if(n){for(var i in o)if(o.hasOwnProperty(i)&&o[i].instance)try{o[i].sandbox.handle(n,t)}catch(e){r(e,i,n)}c(n,t)}},u=function(n){var t=function(t){o[n].config=a(t,o[n].config),o[n].waitForConfig=!1,"string"!=typeof o[n].triggerEvent&&(o[n].config=a(o[n].config,o[n].triggerEvent),f(n))};if(i(n))t(i(n));else var e=(new Date).getTime(),c=!1,s=setInterval(function(){(new Date).getTime()-e<5e3&&!c?c=i(n):(c&&t(c),r({message:"Configuration timeout"},n,"start"),clearInterval(s))},100)},g=function(n){var t;(t=o[n].triggerEvent)&&(e[t]||(e[t]=[]),e[t].push(n)),o[n].waitForConfig?u(n):t||f(n)},v=function(n,t){o[n]={config:t&&t.config,triggerEvent:t&&t.event,instance:null,sandbox:null,waitForConfig:t&&t.waitForConfig||!1}},l=function(n){var t=o[n]&&o[n].instance;t&&t.destroy&&t.destroy(),delete o[n]};return{modules:o,notify:s,start:function(n,t){n&&(l(n),v(n,t),g(n))},stop:function(n){n instanceof Array||(n=[n]);for(var i=0,e=n.length;e>i;i++){var o=n[i];o&&(l(o),t.undef(o))}}}});