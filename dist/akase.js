define("sandbox",[],function(){"use strict";var n={};return function(t,e){function i(n,t){"undefined"==typeof f[n]&&(f[n]=[]),f[n].push(t)}function o(n,t){if(n instanceof Array)for(var e=n.length,o=0;e>o;o++)i(n[o],t);else i(n,t)}function r(n,t){if(f[n]instanceof Array)for(var e=[].concat(f[n]),i=e.length,o=0;i>o;o++)e[o]&&e[o](t)}function a(n,e){t(n,e)}var f={};return{publish:a,handle:r,subscribe:o,api:n,module:e}}}),define("akase",["sandbox"],function(n){"use strict";var t=require,e=function(n){return window.akase&&window.akase.config&&window.akase.config[n]},i={},o={},r=function(n,t,e){console.log(n.message="module: "+t+", event: "+(e||"init")+", message: "+n.message)},a=function(n,t){n=n||{},t=t||{};for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},f=function(e){var i=function(t){o[e].sandbox=new n(s,e);var i=o[e].instance=t(o[e].sandbox),a=o[e].config||{};try{i.init.call(i,a)}catch(f){r(f,e,"init")}};i(t(e))},c=function(n,t){var e;if(e=i[n])for(var r=0,c=e.length;c>r;r++){var s=e[r];o[s].waitForConfig?o[s].triggerEvent=t:(o[s].config=a(o[s].config,t),f(s))}},s=function(n,t){if(n){for(var e in o)if(o.hasOwnProperty(e)&&o[e].instance)try{o[e].sandbox.handle(n,t)}catch(i){r(i,e,n)}c(n,t)}},u=function(n){var t=function(t){o[n].config=a(t,o[n].config),o[n].waitForConfig=!1,"string"!=typeof o[n].triggerEvent&&(o[n].config=a(o[n].config,o[n].triggerEvent),f(n))};if(e(n))t(e(n));else var i=(new Date).getTime(),r=!1,c=setInterval(function(){(new Date).getTime()-i<5e3&&!r?r=e(n):(r&&t(r),clearInterval(c))},100)},g=function(n){var t;(t=o[n].triggerEvent)&&(i[t]||(i[t]=[]),i[t].push(n)),o[n].waitForConfig?u(n):t||f(n)},v=function(n,t){o[n]={config:t&&t.config,triggerEvent:t&&t.event,instance:null,sandbox:null,waitForConfig:t&&t.waitForConfig||!1}},l=function(n){var t=o[n]&&o[n].instance;t&&t.destroy&&t.destroy(),delete o[n]};return{modules:o,notify:s,start:function(n,t){n&&(l(n),v(n,t),g(n))},stop:function(n){n instanceof Array||(n=[n]);for(var e=0,i=n.length;i>e;e++){var o=n[e];o&&(l(o),t.undef(o))}}}});