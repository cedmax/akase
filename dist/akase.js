define("sandbox",[],function(){"use strict";var n={};return function(t,e){function i(n,t){"undefined"==typeof a[n]&&(a[n]=[]),a[n].push(t)}function r(n,t){if(n instanceof Array)for(var e=n.length,r=0;e>r;r++)i(n[r],t);else i(n,t)}function o(n,t){if(a[n]instanceof Array)for(var e=[].concat(a[n]),i=e.length,r=0;i>r;r++)e[r]&&e[r](t)}function f(n,e){t(n,e)}var a={};return{publish:f,handle:o,subscribe:r,api:n,module:e}}}),define("akase",["sandbox"],function(n){"use strict";var t=require,e={},i={},r=function(n,t){n=n||{};for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},o=function(e){var r=function(t){i[e].sandbox=new n(a,e);var r=i[e].instance=t(i[e].sandbox),o=i[e].config||{};r.init.call(r,o)};t.defined(e)?r(t(e)):t([e],function(n){r(n)})},f=function(n,t){var f;if(f=e[n]){for(var a=0,c=f.length;c>a;a++)i[f[a]].config=r(i[f[a]].config,t),o(f[a]);delete e[n]}},a=function(n,t){if(n){for(var e in i)i.hasOwnProperty(e)&&i[e].instance&&i[e].sandbox.handle(n,t);f(n,t)}},c=function(n){var t=i[n]&&i[n].instance;t&&t.destroy&&t.destroy(),delete i[n]},u=function(n,t){i[n]={config:t&&t.config,triggerEvent:t&&t.event,instance:null,sandbox:null};var r;(r=i[n].triggerEvent)?(e[r]||(e[r]=[]),e[r].push(n)):o(n)};return{notify:a,start:function(n,t){n&&(c(n),u(n,t))},stop:function(n){n&&(c(n),t.undef(n))}}});